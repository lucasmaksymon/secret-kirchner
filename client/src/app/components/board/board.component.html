<div class="board-container card" *ngIf="gameState$ | async as gameState">
  <h3 class="text-center mb-1" style="font-size: 14px; margin: 0 0 8px 0; text-transform: uppercase; letter-spacing: 0.5px;">ğŸ“Š Tablero</h3>

  <div class="board-layout">
    <!-- Top Row: 4 Columns Info -->
    <div class="info-row-top">
      <!-- Rechazos -->
      <div class="info-card">
        <div class="tracker-header">
          <h4>ğŸ—³ï¸ Rechazos</h4>
          <span class="chaos-warning" *ngIf="gameState.failedGovernments >= 2">âš ï¸</span>
        </div>
        <div class="election-markers">
          <div 
            *ngFor="let i of [0, 1, 2]"
            class="election-marker"
            [class.active]="i < gameState.failedGovernments"
          >
            {{ i < gameState.failedGovernments ? 'âœ—' : 'â—‹' }}
          </div>
        </div>
        <div class="tracker-count">{{ gameState.failedGovernments }}/3</div>
      </div>

      <!-- Vivos/Muertos -->
      <div class="info-card">
        <h4>ğŸ‘¥ Jugadores</h4>
        <div class="players-status-compact">
          <div class="stat-item">
            <span class="stat-icon">ğŸ’š</span>
            <span class="stat-value">{{ getAlivePlayers(gameState) }}</span>
            <span class="stat-label">Vivos</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">ğŸ’€</span>
            <span class="stat-value">{{ getDeadPlayers(gameState) }}</span>
            <span class="stat-label">Muertos</span>
          </div>
        </div>
      </div>

      <!-- Presidente/Legislador -->
      <div class="info-card">
        <h4>ğŸ›ï¸ Gobierno</h4>
        <div class="government-compact">
          <div class="government-item">
            <span class="role-label">ğŸ©</span>
            <span class="player-name">{{ president?.name || '-' }}</span>
          </div>
          <div class="government-item">
            <span class="role-label">ğŸ’¼</span>
            <span class="player-name">{{ cabinetChief?.name || '-' }}</span>
          </div>
        </div>
      </div>

      <!-- Cartas del mazo -->
      <div class="info-card">
        <h4>ğŸƒ Cartas</h4>
        <div class="deck-compact">
          <div class="stat-item">
            <span class="stat-icon">ğŸ“š</span>
            <span class="stat-value">{{ gameState.deckSize }}</span>
            <span class="stat-label">Mazo</span>
          </div>
          <div class="stat-item">
            <span class="stat-icon">ğŸ—‘ï¸</span>
            <span class="stat-value">{{ gameState.discardSize }}</span>
            <span class="stat-label">Descarte</span>
          </div>
          <div class="stat-item" *ngIf="gameState.vetoUnlocked">
            <span class="stat-icon">ğŸš«</span>
            <span class="stat-label">Veto</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Row: Policy Tracks (2 Columns) -->
    <div class="policies-row">
      <!-- Libertarian Track -->
      <div class="policy-track libertario-track">
        <div class="track-header">
          <h4>ğŸ¦… Libertarios</h4>
          <span class="track-count">{{ gameState.libertarianPolicies }}/5</span>
        </div>
        <div class="policy-slots">
          <div 
            *ngFor="let _ of getLibertarianPolicies()" 
            class="policy-slot filled libertario"
          >
            âœ“
          </div>
          <div 
            *ngFor="let _ of getEmptyLibertarianSlots()" 
            class="policy-slot empty"
          ></div>
        </div>
      </div>

      <!-- Kirchnerista Track -->
      <div class="policy-track kirchnerista-track">
        <div class="track-header">
          <h4>âœŠ Kirchneristas</h4>
          <span class="track-count">{{ gameState.kirchneristaPolicies }}/6</span>
        </div>
        <div class="policy-slots">
          <div
            *ngFor="let _ of getKirchneristaPolicies(); let i = index"
            class="policy-slot filled kirchnerista"
            [class.critical]="i >= 2"
            [class.has-power]="hasPower(i)"
          >
            <span *ngIf="i >= 2 && !hasPower(i)">âš ï¸</span>
            <span *ngIf="i < 2 && !hasPower(i)">âœ“</span>
            <span *ngIf="hasPower(i)" class="power-icon">{{ getPowerIcon(i) }}</span>
          </div>
          <div
            *ngFor="let _ of getEmptyKirchnersistaSlots(); let i = index"
            class="policy-slot empty"
            [class.has-power]="hasPowerEmpty(i)"
          >
            <span *ngIf="hasPowerEmpty(i)" class="power-indicator">{{ getPowerIconEmpty(i) }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

